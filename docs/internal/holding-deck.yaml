# holding-deck.yaml — Ideas on deck, not yet actioned
# One line per idea. Machine readable. Tagged.
#
# Status: hold (default) | active | done | dropped
# Tags: #dark = do not publish to site
#
# Format:
#   - id: short kebab-case
#     idea: one line max
#     added: date
#     status: hold
#     tags: []

items:

  - id: agent-attestation-roi
    idea: estimate ROI on extending the agent builder on thepit.cloud; attest this team of agents on chain in their current form, keep agent url + L2 ETH Base hash in file
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: coincidental-pass-gate-blindness
    idea: >-
      SD-190 signature findings (test asserts right outcome via wrong path) are surviving
      multiple rounds of review — agent self-test, gate, Bugbot round 1, fix cycle, Bugbot round 2.
      V-03c survived all of them. The pattern: LLM writes assertion matching expected status code,
      test passes, every reviewer sees green and moves on. Nobody traces the execution path.
      This is a verification fabric hole: no gate in the chain checks CAUSAL CORRECTNESS of assertions,
      only outcome correctness. Need: (1) standing order or review checklist item for causal path verification
      on test assertions, (2) evaluate whether a static analysis rule can catch status-code-only assertions
      that don't verify error message/code, (3) audit existing test suite for more instances.
      Slopodar cross-ref: new pattern TBD (coincidental verification / phantom green).
    added: 2026-02-28
    status: hold
    priority: high
    tags: [dark]

  - id: worktree-create-script
    idea: >-
      Worktree creation needs a deterministic script with parameters (branch, path convention, naming).
      Currently relying on LLM allocation for location, filename, directory — open to probabilistic variance.
      Script should enforce consistent /tmp/wt-{branch-slug} convention (or configurable root),
      validate branch exists, and log to .keel-state or worktree manifest. Same class of problem as
      pitkeel state-update: if the machine can drift, give it rails.
    added: 2026-02-28
    status: hold
    tags: []


  - id: agent-boot-audit
    idea: >-
      Audit all agent files (.Claude/agents/*.md) and simulate each agent's understanding
      when waking from boot. Do they have what they need from AGENTS.md + their own definition?
      Have we provided them a look-up reference map for anything they might want to look up
      that is not already defined in their operational context? Evaluate from each agent's POV —
      what would Sentinel need that isn't in AGENTS.md? What would Watchdog reach for?
      Cross-reference against docs/internal/ file index and identify gaps.
    added: 2026-02-28
    status: hold
    tags: []

  - id: zombie-code-audit
    idea: >-
      Static analysis + LLM analysis + human review on 119k codebase.
      Three-pass sweep — (1) tooling pass with knip/ts-prune for dead exports, unused deps, unreachable code,
      (2) LLM pass for semantic zombies (functions that exist but are superseded, tests that assert tautologies,
      over-abstracted patterns that could be flattened), (3) Captain review on results.
      Scope is thepit.cloud app code (app/, lib/, components/, db/) and pit* Go CLIs.
      Completed: PRs #381-384 (dead modules, test tautologies, security fixes, brand normalization).
      Cross-model review (4 independent reviewers) verified remaining findings; false positives caught
      (agent-links.ts, agent-lineage.ts alive not dead). Remaining items filed as separate hold entries.
    added: 2026-02-28
    status: done
    priority: high
    tags: [dark]

  - id: agent-prompts-refactor
    idea: >-
      lib/agent-prompts.ts is a thin pass-through wrapper to xml-prompt.ts with 3 consumers.
      Consider inlining or removing the indirection layer. Low priority refactor.
    added: 2026-02-28
    status: hold
    tags: []

  - id: bare-toHaveBeenCalled-assertions
    idea: >-
      ~10 test assertions use bare .toHaveBeenCalled() without verifying arguments.
      Files: actions.test.ts, actions-happy.test.ts, tier.test.ts, eas.test.ts.
      Strengthen to .toHaveBeenCalledWith() for more meaningful assertions.
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: skipped-integration-tests
    idea: >-
      21 integration tests are conditionally gated (require DB connection).
      They always skip in CI. Not a defect — by design — but inflates apparent test count.
      Consider documenting or separating test count reporting.
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: env-test-drift
    idea: >-
      tests/unit/env.test.ts tests a reconstructed schema rather than importing the real one.
      Risk: schema drifts from actual env.ts without test catching it.
      Consider importing real schema or adding a structural equality check.
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: unsafe-pattern-xss-gaps
    idea: >-
      lib/validation.ts UNSAFE_PATTERN regex does not cover vbscript:, data:application/xhtml+xml,
      or HTML entity encoded payloads. Low probability attack vector for this product but
      valid security hardening if revisiting validation layer.
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: anonymization-salt-hardening
    idea: >-
      lib/research-anonymize.ts line 18 has a fixed fallback salt ('thepit-research-default-salt')
      in non-production. Production correctly throws if env var is unset. Dev fallback is
      acceptable for local development but should be documented as intentional.
    added: 2026-02-28
    status: hold
    tags: [dark]

  - id: multiplying-independent-perspectives
    idea: >-
      Principle §6 from bugbot weave: the value of verification is in diversity of perspective, not depth
      of any single gate. Currently this depends on remote Bugbot (expensive, slow, probabilistic sampling).
      Need to build railed, repeatable, LOCAL scaffolding that multiplies independent perspectives without
      remote dependency. Options: (1) vitest plugin that checks assertions verify causal path not just outcome,
      (2) second-pass review agent with different prompt/focus than the writing agent,
      (3) static analysis rule for status-code-only assertions missing error code checks,
      (4) deterministic mutation testing (stryker-style) to catch tautological assertions.
      The key constraint: must be local, fast, deterministic, and catchable in the gate.
      Cross-ref: principles-2026-02-28-bugbot-weave.md §6, slopodar right-answer-wrong-work,
      holding-deck coincidental-pass-gate-blindness.
    added: 2026-02-28
    status: hold
    priority: high
    tags: []

  - id: bout-engine-e2e-scenarios
    idea: >-
      Three Playwright E2E scenarios for bout-engine, parked from Architect spec convergence triage.
      (1) Unauthenticated anonymous bout — SSE opens, agents render, intro pool updates, replay UI appears.
      (2) Authenticated credit depletion — 1-credit user hits premium preset, 402 caught, "Top Up" modal shown.
      (3) BYOK passthrough — mock OpenRouter key, bout streams, internal credit balance unchanged.
      Reactivate when E2E testing is unpaused (currently paused during iteration phase per standing orders).
    added: 2026-02-28
    status: hold
    tags: [dark]
